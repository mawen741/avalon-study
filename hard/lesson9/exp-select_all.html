<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>exp_select_all 对数组长度与循环分支判断</title>
	<script type="text/javascript" src="../../js/avalon.min.js"></script>
	<style type="text/css" media="screen">
		
	</style>
</head>
<body>
	<table ms-controller="test" border="1">
		<tr>
			<td><input type="checkbox" ms-duplex-checked="allChecked" data-duplex-changed="checkAll">全选</td>
		</tr>
		<tr ms-repeat="data">
			<td><input type="checkbox" ms-duplex-checked="el.checked" data-duplex-changed="checkOne">xxxxxx</td>
		</tr>
	</table>
</body>
<script type="text/javascript">
	
		var vm1 = avalon.define({
			$id:"test",
			data:[{checked:false},{checked:false},{checked:false}],
			allChecked:false,
			checkAll:function(){
				var bool = vm1.allChecked = this.checked;
				vm1.data.forEach(function(el){
					el.checked = bool;
				})
			},
			checkOne:function(){
				if(!this.checked){
					vm1.allChecked = false;
				}else{
					vm1.allChecked  = vm1.data.every(function(el){
						return el.checked;
					})
				}
			}
		});
		
		
		

</script>
</html>